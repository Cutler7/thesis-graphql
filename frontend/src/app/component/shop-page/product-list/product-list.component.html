<app-search-panel (search)="search($event)"></app-search-panel>

<table mat-table [dataSource]="products" class="mat-elevation-z8">

  <ng-container matColumnDef="image">
    <th mat-header-cell *matHeaderCellDef>Sortuj według:</th>
    <td mat-cell *matCellDef="let element">
      <img class="product-list-image"
           src="../../../../assets/img/example.jpg"
           alt="product-list-image">
    </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>Produkt</th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef>Cena</th>
    <td mat-cell *matCellDef="let element"
        class="price"> {{element.price | currency:'PLN'}} </td>
  </ng-container>

  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef>
      <button *ngIf="isUserLoggedIn"
              mat-button
              color="accent"
              class="add-product-button"
              (click)="addNewProduct()">
        <i class="feather-plus-square"></i>
        Dodaj nowy produkt
      </button>
    </th>
    <td mat-cell *matCellDef="let element"
        class="row-action-container">
      <ng-container *ngIf="isUserLoggedIn">
        <button mat-button color="accent"
                (click)="editProduct(element._id)">
          <i class="feather-edit"></i>
          Edytuj
        </button>
        <button mat-button color="accent"
                (click)="editProduct(element._id)">
          <i class="feather-chevrons-up"></i>
          Aktualizuj ilość
        </button>
        <button mat-button color="warn"
                (click)="deleteProduct(element._id)">
          <i class="feather-x-square"></i>
          Usuń
        </button>
      </ng-container>
      <ng-container *ngIf="!isUserLoggedIn">
        <button mat-raised-button color="accent"
                (click)="goToDetails(element._id)">
          <i class="feather-arrow-up-right"></i>
          Otwórz
        </button>
        <app-add-product-button (addProductEvent)="addToCart(element, $event)"></app-add-product-button>
      </ng-container>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columns"></tr>
  <tr mat-row *matRowDef="let row; columns: columns;"></tr>
</table>
